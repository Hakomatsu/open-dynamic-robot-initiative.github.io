<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="stuggihop_8cpp" kind="file" language="C++">
    <compoundname>stuggihop.cpp</compoundname>
    <includes refid="stuggihop_8hpp" local="yes">blmc_robots/stuggihop.hpp</includes>
    <includes local="no">math.h</includes>
    <incdepgraph>
      <node id="940">
        <label>atomic</label>
      </node>
      <node id="944">
        <label>real_time_tools/timer.hpp</label>
      </node>
      <node id="943">
        <label>real_time_tools/thread.hpp</label>
      </node>
      <node id="935">
        <label>stdexcept</label>
      </node>
      <node id="932">
        <label>Eigen/Eigen</label>
      </node>
      <node id="929">
        <label>blmc_robots/stuggihop.hpp</label>
        <link refid="stuggihop_8hpp"/>
        <childnode refid="930" relation="include">
        </childnode>
        <childnode refid="937" relation="include">
        </childnode>
        <childnode refid="949" relation="include">
        </childnode>
      </node>
      <node id="930">
        <label>blmc_robots/blmc_joint_module.hpp</label>
        <link refid="blmc__joint__module_8hpp"/>
        <childnode refid="931" relation="include">
        </childnode>
        <childnode refid="932" relation="include">
        </childnode>
        <childnode refid="933" relation="include">
        </childnode>
        <childnode refid="934" relation="include">
        </childnode>
        <childnode refid="935" relation="include">
        </childnode>
        <childnode refid="936" relation="include">
        </childnode>
        <childnode refid="937" relation="include">
        </childnode>
        <childnode refid="946" relation="include">
        </childnode>
      </node>
      <node id="942">
        <label>real_time_tools/spinner.hpp</label>
      </node>
      <node id="941">
        <label>real_time_tools/iostream.hpp</label>
      </node>
      <node id="928">
        <label>src/stuggihop.cpp</label>
        <link refid="stuggihop_8cpp"/>
        <childnode refid="929" relation="include">
        </childnode>
        <childnode refid="931" relation="include">
        </childnode>
      </node>
      <node id="948">
        <label>vector</label>
      </node>
      <node id="939">
        <label>signal.h</label>
      </node>
      <node id="937">
        <label>blmc_robots/common_header.hpp</label>
        <link refid="common__header_8hpp"/>
        <childnode refid="938" relation="include">
        </childnode>
        <childnode refid="932" relation="include">
        </childnode>
        <childnode refid="939" relation="include">
        </childnode>
        <childnode refid="940" relation="include">
        </childnode>
        <childnode refid="941" relation="include">
        </childnode>
        <childnode refid="942" relation="include">
        </childnode>
        <childnode refid="943" relation="include">
        </childnode>
        <childnode refid="944" relation="include">
        </childnode>
        <childnode refid="945" relation="include">
        </childnode>
        <childnode refid="936" relation="include">
        </childnode>
      </node>
      <node id="933">
        <label>array</label>
      </node>
      <node id="938">
        <label>yaml_cpp_catkin/yaml_cpp_fwd.hpp</label>
      </node>
      <node id="931">
        <label>math.h</label>
      </node>
      <node id="947">
        <label>blmc_robots/mathematics/polynome.hxx</label>
        <link refid="polynome_8hxx_source"/>
        <childnode refid="934" relation="include">
        </childnode>
        <childnode refid="948" relation="include">
        </childnode>
        <childnode refid="946" relation="include">
        </childnode>
      </node>
      <node id="934">
        <label>iostream</label>
      </node>
      <node id="946">
        <label>blmc_robots/mathematics/polynome.hpp</label>
        <link refid="polynome_8hpp"/>
        <childnode refid="933" relation="include">
        </childnode>
        <childnode refid="947" relation="include">
        </childnode>
      </node>
      <node id="945">
        <label>blmc_drivers/devices/analog_sensor.hpp</label>
      </node>
      <node id="936">
        <label>blmc_drivers/devices/motor.hpp</label>
      </node>
      <node id="949">
        <label>blmc_robots/slider.hpp</label>
        <link refid="slider_8hpp"/>
        <childnode refid="933" relation="include">
        </childnode>
        <childnode refid="931" relation="include">
        </childnode>
        <childnode refid="932" relation="include">
        </childnode>
        <childnode refid="945" relation="include">
        </childnode>
        <childnode refid="937" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespaceblmc__robots">blmc_robots</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="stuggihop_8hpp" kindref="compound">blmc_robots/stuggihop.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespaceblmc__robots" kindref="compound">blmc_robots</ref></highlight></codeline>
<codeline lineno="5"><highlight class="normal">{</highlight></codeline>
<codeline lineno="6"><highlight class="normal"><ref refid="classblmc__robots_1_1Stuggihop_1aea7781a2eb5a410ca8ab2bbfe425cb6a" kindref="member">Stuggihop::Stuggihop</ref>()</highlight></codeline>
<codeline lineno="7"><highlight class="normal">{</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1af452a5e831409fd2c39fd9ab7a42d9c8" kindref="member">motor_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a3585b14517a194f1747d2f0b803ec250" kindref="member">motor_velocities_</ref>.setZero();</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ae89859684b64b5ea90486e867f32bc32" kindref="member">motor_currents_</ref>.setZero();</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a0eeb6c9af2e7200fd1bfcceaade814bb" kindref="member">motor_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a3e2e0eb8643340d8f81106bbf5189bca" kindref="member">motor_inertias_</ref>.setZero();</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a89d7bfb8de6cb40c9b14cb0338442b70" kindref="member">motor_encoder_indexes_</ref>.setZero();</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a531b6300fe90ee588f24db47c01aa90d" kindref="member">motor_target_currents_</ref>.setZero();</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ad26d6b054a984fb1eb01c62a3777827d" kindref="member">motor_target_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.setZero();</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1ed246c189c92bc9fb87996fabe9dee8" kindref="member">target_motor_current_tmp_</ref>.setZero();</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a9426a6b5b97a1d57a4db4691f0f4eac5" kindref="member">joint_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ad9373f04a92810a1833ea012226d48ba" kindref="member">joint_velocities_</ref>.setZero();</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a414d3559ccc9e7749871860acdad2e82" kindref="member">joint_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a0cc32133b3a6afd375eaee0537adfdfb" kindref="member">joint_target_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.setZero();</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>joint_hardstop2zero_offsets_.setZero();</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a63813a55789c75aa4e4c7d1c783c857d" kindref="member">joint_start2hardstop_offsets_</ref>.setZero();</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>slider_positions_.setZero();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>.setZero();</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a84f6ffe6ea3058bb908a4915e040e936" kindref="member">boom_gear_ratios_</ref><sp/>&lt;&lt;<sp/>2.88,<sp/>1;<sp/><sp/></highlight><highlight class="comment">//<sp/>horizontal<sp/>and<sp/>vertical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aacd3bb51e67331ec1e723a6f9a19a7b1" kindref="member">boom_encoder_index_</ref>.setZero();</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ac07e867e6e76dde5980e18cff7f69d04" kindref="member">boom_zero_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ac07e867e6e76dde5980e18cff7f69d04" kindref="member">boom_zero_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a65986a607e6ab98fa497abfdfebc0f7a" kindref="member">boom_length_</ref><sp/>&lt;&lt;<sp/>2;<sp/><sp/></highlight><highlight class="comment">//<sp/>meters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a2c2e6bad59b31a36f0cbadb2516afcba" kindref="member">base_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a15b92fee74712cb5fae01bfc9204e86b" kindref="member">base_velocities_</ref>.setZero();</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>now<sp/>this<sp/>value<sp/>is<sp/>very<sp/>small<sp/>but<sp/>it<sp/>is<sp/>currently<sp/>for<sp/>debug<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>.fill(4.5);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.fill(0.025);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a3e2e0eb8643340d8f81106bbf5189bca" kindref="member">motor_inertias_</ref>.fill(0.045);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.fill(9.0);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1acd8110dd472072fb138d95964fefaa36" kindref="member">joint_max_torque_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>.array()<sp/>*</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.array()<sp/>*</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="62"><highlight class="normal">}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a2a272c1cb428a2a7250b23d7ca40c894" kindref="member">Stuggihop::initialize</ref>()</highlight></codeline>
<codeline lineno="65"><highlight class="normal">{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>initialize<sp/>the<sp/>communication<sp/>with<sp/>the<sp/>can<sp/>cards</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for(unsigned<sp/>i=0<sp/>;<sp/>i&lt;<sp/>can_buses_.size()<sp/>;<sp/>++i)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>2;<sp/>++i)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::ostringstream<sp/>oss;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>oss<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;can&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>i;<sp/><sp/></highlight><highlight class="comment">//<sp/>hard-coding<sp/>to<sp/>&quot;can0&quot;<sp/>and<sp/>&quot;can1&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a708d4483e73a19b8e98dd33d0c22e2aa" kindref="member">can_buses_</ref>[i]<sp/>=<sp/>std::make_shared&lt;blmc_drivers::CanBus&gt;(oss.str());</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1d3b7f7f48192e25ec5be139fe6f2ee3" kindref="member">can_motor_boards_</ref>[i]<sp/>=</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::make_shared&lt;blmc_drivers::CanBusMotorBoard&gt;(<ref refid="classblmc__robots_1_1Stuggihop_1a708d4483e73a19b8e98dd33d0c22e2aa" kindref="member">can_buses_</ref>[i]);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sliders_[0]<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>std::make_shared&lt;blmc_drivers::AnalogSensor&gt;(can_motor_boards_[0],</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>contact_sensors_[0]<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>std::make_shared&lt;blmc_drivers::AnalogSensor&gt;(can_motor_boards_[1],</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>height_sensors_[0]<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>std::make_shared&lt;blmc_drivers::AnalogSensor&gt;(can_motor_boards_[1],</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>can<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MOTOR_HFE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[0]<sp/>=<sp/>std::make_shared&lt;blmc_drivers::SafeMotor&gt;(</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1d3b7f7f48192e25ec5be139fe6f2ee3" kindref="member">can_motor_boards_</ref>[0],<sp/>1,<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>[0]);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MOTOR_KFE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>motors_[1]<sp/>=<sp/>std::make_shared&lt;blmc_drivers::SafeMotor&gt;(</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>can_motor_boards_[0],<sp/>0,<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>[1]);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>can1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Boom<sp/>encoders:<sp/>horizontal<sp/>and<sp/>vertical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>[0]<sp/>=<sp/>std::make_shared&lt;blmc_drivers::SafeMotor&gt;(</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>can_motor_boards_[1],<sp/>0,<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>[0]);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MOTOR_KFE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>boom_encoders_[1]<sp/>=<sp/>std::make_shared&lt;blmc_drivers::SafeMotor&gt;(</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>can_motor_boards_[1],<sp/>1,<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>[1]);</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Call<sp/>the<sp/>method<sp/>to<sp/>sync<sp/>the<sp/>max<sp/>current<sp/>with<sp/>the<sp/>max<sp/>torques.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a8be641fdc498b04a52bb721f14c449c3" kindref="member">set_max_current</ref>(<ref refid="classblmc__robots_1_1Stuggihop_1a6b42e186971644de0a9fd85c23777c29" kindref="member">motor_max_current_</ref>);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>to<sp/>make<sp/>sure<sp/>there<sp/>is<sp/>a<sp/>first<sp/>package<sp/>when<sp/>acquire_sensors()<sp/>later.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>real_time_tools::Timer::sleep_sec(0.5);</highlight></codeline>
<codeline lineno="109"><highlight class="normal">}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a594cb654f63c3ff8fb7718ce7d393d81" kindref="member">Stuggihop::acquire_sensors</ref>()</highlight></codeline>
<codeline lineno="112"><highlight class="normal">{</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>motors<sp/>positions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1af452a5e831409fd2c39fd9ab7a42d9c8" kindref="member">motor_positions_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;get_measurement(mi::position)-&gt;newest_element()<sp/>+</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="classblmc__robots_1_1Stuggihop_1a63813a55789c75aa4e4c7d1c783c857d" kindref="member">joint_start2hardstop_offsets_</ref>(i)<sp/>-</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>joint_hardstop2zero_offsets_(i))<sp/>*</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>(i));</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>motors<sp/>velocities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a3585b14517a194f1747d2f0b803ec250" kindref="member">motor_velocities_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;get_measurement(mi::velocity)-&gt;newest_element();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>motors<sp/>current</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ae89859684b64b5ea90486e867f32bc32" kindref="member">motor_currents_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;get_measurement(mi::current)-&gt;newest_element();</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>last<sp/>sent<sp/>current<sp/>sent</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a531b6300fe90ee588f24db47c01aa90d" kindref="member">motor_target_currents_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;get_sent_current_target()-&gt;newest_element();</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>encoder<sp/>indexes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a89d7bfb8de6cb40c9b14cb0338442b70" kindref="member">motor_encoder_indexes_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;get_measurement(mi::encoder_index)-&gt;length()<sp/>&gt;<sp/>0</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;get_measurement(mi::encoder_index)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;newest_element()</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>std::nan(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>actual<sp/>motor<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a0eeb6c9af2e7200fd1bfcceaade814bb" kindref="member">motor_torques_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ae89859684b64b5ea90486e867f32bc32" kindref="member">motor_currents_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.array();</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>last<sp/>sent<sp/>motor<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ad26d6b054a984fb1eb01c62a3777827d" kindref="member">motor_target_torques_</ref><sp/>=</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a531b6300fe90ee588f24db47c01aa90d" kindref="member">motor_target_currents_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.array();</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a9426a6b5b97a1d57a4db4691f0f4eac5" kindref="member">joint_positions_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1af452a5e831409fd2c39fd9ab7a42d9c8" kindref="member">motor_positions_</ref>.array()<sp/>/<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>velocities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ad9373f04a92810a1833ea012226d48ba" kindref="member">joint_velocities_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a3585b14517a194f1747d2f0b803ec250" kindref="member">motor_velocities_</ref>.array()<sp/>/<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a414d3559ccc9e7749871860acdad2e82" kindref="member">joint_torques_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a0eeb6c9af2e7200fd1bfcceaade814bb" kindref="member">motor_torques_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>target<sp/>joint<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a0cc32133b3a6afd375eaee0537adfdfb" kindref="member">joint_target_torques_</ref><sp/>=</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ad26d6b054a984fb1eb01c62a3777827d" kindref="member">motor_target_torques_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aabd468b6cbe31a5cba60fd8958da3d1a" kindref="member">joint_encoder_index_</ref><sp/>=</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a89d7bfb8de6cb40c9b14cb0338442b70" kindref="member">motor_encoder_indexes_</ref>.array()<sp/>/<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>boom<sp/>positions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ade07babef35f510b27bf1a6aa4a4a7bd" kindref="member">boom_positions_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>[i]-&gt;get_measurement(mi::position)-&gt;newest_element()<sp/>-</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ac07e867e6e76dde5980e18cff7f69d04" kindref="member">boom_zero_positions_</ref>(i);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>boom<sp/>velocities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1ba0991f17e42a011eddac7aa198f476" kindref="member">boom_velocities_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>[i]-&gt;get_measurement(mi::velocity)-&gt;newest_element();</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aacd3bb51e67331ec1e723a6f9a19a7b1" kindref="member">boom_encoder_index_</ref>(i)<sp/>=</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>[i]-&gt;get_measurement(mi::encoder_index)-&gt;length()<sp/>&gt;<sp/>0</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5c96c061e050c6b89175ea64ca718fcb" kindref="member">boom_encoders_</ref>[i]</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;get_measurement(mi::encoder_index)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;newest_element()</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>std::nan(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>whatever<sp/>reason,<sp/>this<sp/>does<sp/>not<sp/>work<sp/>all<sp/>on<sp/>one<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>boom_positions_.array()<sp/>*<sp/>boom_gear_ratios_.array()*boom_length_.array();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a2c2e6bad59b31a36f0cbadb2516afcba" kindref="member">base_positions_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1ade07babef35f510b27bf1a6aa4a4a7bd" kindref="member">boom_positions_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a84f6ffe6ea3058bb908a4915e040e936" kindref="member">boom_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a2c2e6bad59b31a36f0cbadb2516afcba" kindref="member">base_positions_</ref><sp/>*=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a65986a607e6ab98fa497abfdfebc0f7a" kindref="member">boom_length_</ref>;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a15b92fee74712cb5fae01bfc9204e86b" kindref="member">base_velocities_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1ba0991f17e42a011eddac7aa198f476" kindref="member">boom_velocities_</ref>.array()<sp/>*<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a84f6ffe6ea3058bb908a4915e040e936" kindref="member">boom_gear_ratios_</ref>.array();</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a15b92fee74712cb5fae01bfc9204e86b" kindref="member">base_velocities_</ref><sp/>*=<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a65986a607e6ab98fa497abfdfebc0f7a" kindref="member">boom_length_</ref>;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>//<sp/>acquire<sp/>the<sp/>slider<sp/>positions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>(unsigned<sp/>i=0<sp/>;<sp/>i<sp/>&lt;<sp/>slider_positions_.size()<sp/>;<sp/>++i)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>//<sp/>acquire<sp/>the<sp/>slider</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>slider_positions_(i)<sp/>=</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>sliders_[i]-&gt;get_measurement()-&gt;newest_element();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal">}</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a5f0707d8965fc98b36ca3fa42b57db5f" kindref="member">Stuggihop::set_hardstop2zero_offsets</ref>(</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Eigen::Ref&lt;Vector2d&gt;<sp/>hardstop2zero_offsets)</highlight></codeline>
<codeline lineno="205"><highlight class="normal">{</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>joint_hardstop2zero_offsets_<sp/>=<sp/>hardstop2zero_offsets;</highlight></codeline>
<codeline lineno="207"><highlight class="normal">}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1afb35c29fd6e5eb97337857fd34532a6d" kindref="member">Stuggihop::set_start2hardstop_offsets</ref>(</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Eigen::Ref&lt;Vector2d&gt;<sp/>start2hardstop_offsets)</highlight></codeline>
<codeline lineno="211"><highlight class="normal">{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a63813a55789c75aa4e4c7d1c783c857d" kindref="member">joint_start2hardstop_offsets_</ref><sp/>=<sp/>start2hardstop_offsets;</highlight></codeline>
<codeline lineno="213"><highlight class="normal">}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab3c118885810575b36c49432a2a5eca5" kindref="member">Stuggihop::send_target_motor_current</ref>(</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Eigen::Ref&lt;Vector2d&gt;<sp/>target_motor_current)</highlight></codeline>
<codeline lineno="217"><highlight class="normal">{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>up<sp/>the<sp/>target<sp/>current</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;set_current_target(target_motor_current(i));</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>actually<sp/>send<sp/>the<sp/>torques<sp/>to<sp/>the<sp/>robot</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a7ec24e6d528287cb71578fa5e69ffb37" kindref="member">motors_</ref>[i]-&gt;send_if_input_changed();</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal">}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ac8bae7764c409c8312408ea8adb1165f" kindref="member">Stuggihop::send_target_joint_torque</ref>(</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Eigen::Ref&lt;Vector2d&gt;<sp/>target_joint_torque)</highlight></codeline>
<codeline lineno="233"><highlight class="normal">{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1a1ed246c189c92bc9fb87996fabe9dee8" kindref="member">target_motor_current_tmp_</ref><sp/>=<sp/>target_joint_torque.array()<sp/>/</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab30bb44a129492efbba9412c8f408802" kindref="member">joint_gear_ratios_</ref>.array()<sp/>/</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1aed1ca67af3da9ea0bafad293f72522de" kindref="member">motor_torque_constants_</ref>.array();</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Stuggihop_1ab3c118885810575b36c49432a2a5eca5" kindref="member">send_target_motor_current</ref>(<ref refid="classblmc__robots_1_1Stuggihop_1a1ed246c189c92bc9fb87996fabe9dee8" kindref="member">target_motor_current_tmp_</ref>);</highlight></codeline>
<codeline lineno="238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>blmc_robots</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="src/stuggihop.cpp"/>
  </compounddef>
</doxygen>
