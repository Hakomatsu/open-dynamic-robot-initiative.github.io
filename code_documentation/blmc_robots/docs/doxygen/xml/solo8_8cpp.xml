<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="solo8_8cpp" kind="file" language="C++">
    <compoundname>solo8.cpp</compoundname>
    <includes refid="solo8_8hpp" local="yes">blmc_robots/solo8.hpp</includes>
    <includes local="no">cmath</includes>
    <includes refid="common__programs__header_8hpp" local="yes">blmc_robots/common_programs_header.hpp</includes>
    <incdepgraph>
      <node id="883">
        <label>atomic</label>
      </node>
      <node id="899">
        <label>master_board_sdk/defines.h</label>
      </node>
      <node id="887">
        <label>real_time_tools/timer.hpp</label>
      </node>
      <node id="901">
        <label>cmath</label>
      </node>
      <node id="886">
        <label>real_time_tools/thread.hpp</label>
      </node>
      <node id="895">
        <label>stdexcept</label>
      </node>
      <node id="881">
        <label>Eigen/Eigen</label>
      </node>
      <node id="885">
        <label>real_time_tools/spinner.hpp</label>
      </node>
      <node id="884">
        <label>real_time_tools/iostream.hpp</label>
      </node>
      <node id="898">
        <label>vector</label>
      </node>
      <node id="882">
        <label>signal.h</label>
      </node>
      <node id="879">
        <label>blmc_robots/common_header.hpp</label>
        <link refid="common__header_8hpp"/>
        <childnode refid="880" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="882" relation="include">
        </childnode>
        <childnode refid="883" relation="include">
        </childnode>
        <childnode refid="884" relation="include">
        </childnode>
        <childnode refid="885" relation="include">
        </childnode>
        <childnode refid="886" relation="include">
        </childnode>
        <childnode refid="887" relation="include">
        </childnode>
        <childnode refid="888" relation="include">
        </childnode>
        <childnode refid="889" relation="include">
        </childnode>
      </node>
      <node id="891">
        <label>array</label>
      </node>
      <node id="902">
        <label>blmc_robots/common_programs_header.hpp</label>
        <link refid="common__programs__header_8hpp_source"/>
        <childnode refid="879" relation="include">
        </childnode>
      </node>
      <node id="880">
        <label>yaml_cpp_catkin/yaml_cpp_fwd.hpp</label>
      </node>
      <node id="877">
        <label>blmc_robots/solo8.hpp</label>
        <link refid="solo8_8hpp"/>
        <childnode refid="878" relation="include">
        </childnode>
        <childnode refid="879" relation="include">
        </childnode>
        <childnode refid="890" relation="include">
        </childnode>
        <childnode refid="893" relation="include">
        </childnode>
      </node>
      <node id="892">
        <label>math.h</label>
      </node>
      <node id="897">
        <label>blmc_robots/mathematics/polynome.hxx</label>
        <link refid="polynome_8hxx_source"/>
        <childnode refid="894" relation="include">
        </childnode>
        <childnode refid="898" relation="include">
        </childnode>
        <childnode refid="896" relation="include">
        </childnode>
      </node>
      <node id="894">
        <label>iostream</label>
      </node>
      <node id="876">
        <label>src/solo8.cpp</label>
        <link refid="solo8_8cpp"/>
        <childnode refid="877" relation="include">
        </childnode>
        <childnode refid="901" relation="include">
        </childnode>
        <childnode refid="902" relation="include">
        </childnode>
      </node>
      <node id="896">
        <label>blmc_robots/mathematics/polynome.hpp</label>
        <link refid="polynome_8hpp"/>
        <childnode refid="891" relation="include">
        </childnode>
        <childnode refid="897" relation="include">
        </childnode>
      </node>
      <node id="893">
        <label>blmc_robots/spi_joint_module.hpp</label>
        <link refid="spi__joint__module_8hpp_source"/>
        <childnode refid="892" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="891" relation="include">
        </childnode>
        <childnode refid="894" relation="include">
        </childnode>
        <childnode refid="895" relation="include">
        </childnode>
        <childnode refid="889" relation="include">
        </childnode>
        <childnode refid="879" relation="include">
        </childnode>
        <childnode refid="896" relation="include">
        </childnode>
        <childnode refid="899" relation="include">
        </childnode>
        <childnode refid="900" relation="include">
        </childnode>
      </node>
      <node id="878">
        <label>blmc_drivers/serial_reader.hpp</label>
      </node>
      <node id="888">
        <label>blmc_drivers/devices/analog_sensor.hpp</label>
      </node>
      <node id="889">
        <label>blmc_drivers/devices/motor.hpp</label>
      </node>
      <node id="900">
        <label>master_board_sdk/master_board_interface.h</label>
      </node>
      <node id="890">
        <label>blmc_robots/slider.hpp</label>
        <link refid="slider_8hpp"/>
        <childnode refid="891" relation="include">
        </childnode>
        <childnode refid="892" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="888" relation="include">
        </childnode>
        <childnode refid="879" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespaceblmc__robots">blmc_robots</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="solo8_8hpp" kindref="compound">blmc_robots/solo8.hpp</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cmath&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;blmc_robots/common_programs_header.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespaceblmc__robots" kindref="compound">blmc_robots</ref></highlight></codeline>
<codeline lineno="6"><highlight class="normal">{</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Solo8_1addc990242a0e96c40edc629883541be7" kindref="member">Solo8::max_joint_torque_security_margin_</ref><sp/>=<sp/>0.99;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"><ref refid="classblmc__robots_1_1Solo8_1ab37c2e406f12685fcb4e09086ee7c0c0" kindref="member">Solo8::Solo8</ref>()</highlight></codeline>
<codeline lineno="10"><highlight class="normal">{</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1ad2a475dd31443243c1683c2fb091418e" kindref="member">motor_inertias_</ref>.setZero();</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a21293b97b37bcd42b3e3766a72fabf26" kindref="member">motor_torque_constants_</ref>.setZero();</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a09ab41c9822e1f1c853d0b9065205d2d" kindref="member">joint_gear_ratios_</ref>.setZero();</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af9b0800cd9ef22713767298ef850eddf" kindref="member">motor_max_current_</ref>.setZero();</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a053f46bebf56986d976e34c0c47956c9" kindref="member">max_joint_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a31f29f1bf604552b2ae5d017e5f3e2d1" kindref="member">joint_zero_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af8e3d6a86608540f39bf1de1f052266a" kindref="member">reverse_polarities_</ref>.fill(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Solo8_1a8966f925be4af6937b4544cb5dbc8eab" kindref="member">motor_enabled_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a8966f925be4af6937b4544cb5dbc8eab" kindref="member">motor_enabled_</ref>[i]<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a01868736d0656e8dd029b69297661b48" kindref="member">motor_ready_</ref>[i]<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classblmc__robots_1_1Solo8_1adfe55489326f302577d3d851e098bbaf" kindref="member">motor_board_enabled_</ref>.size();<sp/>++i)</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1adfe55489326f302577d3d851e098bbaf" kindref="member">motor_board_enabled_</ref>[0]<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af8f47463c79497bfa978ac90249ea144" kindref="member">motor_board_errors_</ref>[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a2a731cc04e539d6fde3c3e5cd6922a42" kindref="member">joint_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a4642f07d901c644a5ecacc8cd65b3c4e" kindref="member">joint_velocities_</ref>.setZero();</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a75ef5d44774e506d90b27ea73e2ae861" kindref="member">joint_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a11ca0b9a39f810e5bc206adaf43350bb" kindref="member">joint_target_torques_</ref>.setZero();</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a2003b6aa7b0e8824a190c65de42550a2" kindref="member">joint_encoder_index_</ref>.setZero();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af9d34a00b42e425515d1d7571c59ddca" kindref="member">slider_positions_</ref>.setZero();</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a1593f4a8fbba53c407a4e0434ebe785c" kindref="member">contact_sensors_states_</ref>.setZero();</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>now<sp/>this<sp/>value<sp/>is<sp/>very<sp/>small<sp/>but<sp/>it<sp/>is<sp/>currently<sp/>for<sp/>debug<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af9b0800cd9ef22713767298ef850eddf" kindref="member">motor_max_current_</ref>.fill(4.0);<sp/><sp/></highlight><highlight class="comment">//<sp/>TODO:<sp/>set<sp/>as<sp/>paramters?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a21293b97b37bcd42b3e3766a72fabf26" kindref="member">motor_torque_constants_</ref>.fill(0.025);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1ad2a475dd31443243c1683c2fb091418e" kindref="member">motor_inertias_</ref>.fill(0.045);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a09ab41c9822e1f1c853d0b9065205d2d" kindref="member">joint_gear_ratios_</ref>.fill(9.0);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1ae8717ecb7e21391ef5f54d67e0e46b5d" kindref="member">slider_positions_vector_</ref>.resize(3);</highlight></codeline>
<codeline lineno="61"><highlight class="normal">}</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Solo8_1a7016486ea321d63f2659b5efba4dd78a" kindref="member">Solo8::initialize</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string&amp;<sp/>network_id)</highlight></codeline>
<codeline lineno="64"><highlight class="normal">{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>a<sp/>serial<sp/>port<sp/>to<sp/>read<sp/>slider<sp/>values.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1ac01d9597b2e0446e29c249f74c6ffc8f" kindref="member">serial_reader_</ref><sp/>=</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::make_shared&lt;blmc_drivers::SerialReader&gt;(</highlight><highlight class="stringliteral">&quot;Not<sp/>used&quot;</highlight><highlight class="normal">,<sp/>3);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>the<sp/>different<sp/>mapping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a5d04c4cdbd954dc2a76c08989ccf0040" kindref="member">map_joint_id_to_motor_board_id_</ref><sp/>=<sp/>{0,<sp/>0,<sp/>1,<sp/>1,<sp/>2,<sp/>2,<sp/>3,<sp/>3};</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a6c1a5948cf6d2ec18d619753d51b8546" kindref="member">map_joint_id_to_motor_port_id_</ref><sp/>=<sp/>{0,<sp/>1,<sp/>1,<sp/>0,<sp/>1,<sp/>0,<sp/>0,<sp/>1};</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>the<sp/>communication<sp/>with<sp/>the<sp/>main<sp/>board.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a7beb3d9ca8cc39e832fb5515bd2e71c5" kindref="member">main_board_ptr_</ref><sp/>=<sp/>std::make_shared&lt;MasterBoardInterface&gt;(network_id);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a7beb3d9ca8cc39e832fb5515bd2e71c5" kindref="member">main_board_ptr_</ref>-&gt;Init();</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>std::array&lt;bool,<sp/>8&gt;<sp/>reverse_polarities<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">};</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref><sp/>=<sp/>std::make_shared&lt;blmc_robots::SpiJointModules&lt;8&gt;<sp/>&gt;(</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a7beb3d9ca8cc39e832fb5515bd2e71c5" kindref="member">main_board_ptr_</ref>,</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a5d04c4cdbd954dc2a76c08989ccf0040" kindref="member">map_joint_id_to_motor_board_id_</ref>,</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a6c1a5948cf6d2ec18d619753d51b8546" kindref="member">map_joint_id_to_motor_port_id_</ref>,</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a21293b97b37bcd42b3e3766a72fabf26" kindref="member">motor_torque_constants_</ref>,</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a09ab41c9822e1f1c853d0b9065205d2d" kindref="member">joint_gear_ratios_</ref>,</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a31f29f1bf604552b2ae5d017e5f3e2d1" kindref="member">joint_zero_positions_</ref>,</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af9b0800cd9ef22713767298ef850eddf" kindref="member">motor_max_current_</ref>,</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reverse_polarities);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;enable();</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!<ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;is_ready()<sp/>&amp;&amp;<sp/>!CTRL_C_DETECTED)</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;send_torques();</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;acquire_sensors();</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>real_time_tools::Timer::sleep_sec(0.001);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;is_ready())</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rt_printf(</highlight><highlight class="stringliteral">&quot;All<sp/>motors<sp/>and<sp/>boards<sp/>are<sp/>ready.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="103"><highlight class="normal">}</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Solo8_1a2ba66edbb1dc4b9fddb9e9978f0fd9e7" kindref="member">Solo8::acquire_sensors</ref>()</highlight></codeline>
<codeline lineno="106"><highlight class="normal">{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>counter<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;acquire_sensors();</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(counter++<sp/>%<sp/>1000<sp/>==<sp/>0<sp/>&amp;&amp;<sp/>main_board_ptr_-&gt;IsTimeout())</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;===<sp/>master-board<sp/>is<sp/>in<sp/>timeout.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>position</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a2a731cc04e539d6fde3c3e5cd6922a42" kindref="member">joint_positions_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_measured_angles();</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>velocities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a4642f07d901c644a5ecacc8cd65b3c4e" kindref="member">joint_velocities_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_measured_velocities();</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a75ef5d44774e506d90b27ea73e2ae861" kindref="member">joint_torques_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_measured_torques();</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>joint<sp/>index</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a2003b6aa7b0e8824a190c65de42550a2" kindref="member">joint_encoder_index_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_measured_index_angles();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>target<sp/>joint<sp/>torques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a11ca0b9a39f810e5bc206adaf43350bb" kindref="member">joint_target_torques_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_sent_torques();</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1ac01d9597b2e0446e29c249f74c6ffc8f" kindref="member">serial_reader_</ref>-&gt;fill_vector(<ref refid="classblmc__robots_1_1Solo8_1ae8717ecb7e21391ef5f54d67e0e46b5d" kindref="member">slider_positions_vector_</ref>);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>2;<sp/>++i)</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>acquire<sp/>the<sp/>slider</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af9d34a00b42e425515d1d7571c59ddca" kindref="member">slider_positions_</ref>(i)<sp/>=<sp/>double(<ref refid="classblmc__robots_1_1Solo8_1ae8717ecb7e21391ef5f54d67e0e46b5d" kindref="member">slider_positions_vector_</ref>[i<sp/>+<sp/>1])<sp/>/<sp/>1024.;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a25153421bca095a344408e055f3794b6" kindref="member">active_estop_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1ae8717ecb7e21391ef5f54d67e0e46b5d" kindref="member">slider_positions_vector_</ref>[0]<sp/>==<sp/>0;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>motor<sp/>board<sp/>status</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>++i)</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1adfe55489326f302577d3d851e098bbaf" kindref="member">motor_board_enabled_</ref>[i]<sp/>=</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main_board_ptr_-&gt;motor_drivers[i].get_is_enabled();</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1af8f47463c79497bfa978ac90249ea144" kindref="member">motor_board_errors_</ref>[i]<sp/>=</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>main_board_ptr_-&gt;motor_drivers[i].get_error_code();</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>motors<sp/>status</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a8966f925be4af6937b4544cb5dbc8eab" kindref="member">motor_enabled_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_motor_enabled();</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1a01868736d0656e8dd029b69297661b48" kindref="member">motor_ready_</ref><sp/>=<sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;get_motor_ready();</highlight></codeline>
<codeline lineno="158"><highlight class="normal">}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Solo8_1aa743eac2996bd33c86e23bd2029c3a01" kindref="member">Solo8::send_target_joint_torque</ref>(</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Eigen::Ref&lt;Vector8d&gt;<sp/>target_joint_torque)</highlight></codeline>
<codeline lineno="162"><highlight class="normal">{</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>estop_msg_counter_<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="common__header_8hpp_1a98975ffbe0bca1296078e0350dfedd60" kindref="member">Vector8d</ref><sp/>ctrl_torque<sp/>=<sp/>target_joint_torque;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classblmc__robots_1_1Solo8_1a25153421bca095a344408e055f3794b6" kindref="member">active_estop_</ref>)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctrl_torque.fill(0.);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>estop_msg_counter_<sp/>+=<sp/>1;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(estop_msg_counter_<sp/>%<sp/>5000<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rt_printf(</highlight><highlight class="stringliteral">&quot;solo8:<sp/>estop<sp/>is<sp/>active.<sp/>Setting<sp/>ctrl_torque<sp/>to<sp/>zero.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;set_torques(ctrl_torque);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classblmc__robots_1_1Solo8_1aaca553f0634f406d2e41a0499dedd73a" kindref="member">joints_</ref>-&gt;send_torques();</highlight></codeline>
<codeline lineno="176"><highlight class="normal">}</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classblmc__robots_1_1Solo8_1adb4de0ff0c5cc2159a1e3b2f32955198" kindref="member">Solo8::calibrate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Vector8d&amp;<sp/>home_offset_rad)</highlight></codeline>
<codeline lineno="179"><highlight class="normal">{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal">}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>blmc_robots</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="src/solo8.cpp"/>
  </compounddef>
</doxygen>
