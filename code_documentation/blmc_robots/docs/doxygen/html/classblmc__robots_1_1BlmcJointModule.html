<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>blmc_robots: blmc_robots::BlmcJointModule Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">blmc_robots
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classblmc__robots_1_1BlmcJointModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classblmc__robots_1_1BlmcJointModule-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">blmc_robots::BlmcJointModule Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classblmc__robots_1_1BlmcJointModule.html" title="The BlmcJointModule class is containing the joint information. ">BlmcJointModule</a> class is containing the joint information.  
 <a href="classblmc__robots_1_1BlmcJointModule.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="blmc__joint__module_8hpp_source.html">blmc_joint_module.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for blmc_robots::BlmcJointModule:</div>
<div class="dyncontent">
<div class="center"><img src="classblmc__robots_1_1BlmcJointModule__coll__graph.png" border="0" usemap="#blmc__robots_1_1BlmcJointModule_coll__map" alt="Collaboration graph"/></div>
<map name="blmc__robots_1_1BlmcJointModule_coll__map" id="blmc__robots_1_1BlmcJointModule_coll__map">
<area shape="rect" id="node2" href="structblmc__robots_1_1HomingState.html" title="State variables required for the homing. " alt="" coords="17,5,195,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a09a0b8815e6c447e3ee6632ade940e0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a09a0b8815e6c447e3ee6632ade940e0b">BlmcJointModule</a> (std::shared_ptr&lt; blmc_drivers::MotorInterface &gt; motor, const double &amp;motor_constant, const double &amp;gear_ratio, const double &amp;zero_angle, const bool &amp;reverse_polarity=false, const double &amp;max_current=2.1)</td></tr>
<tr class="memdesc:a09a0b8815e6c447e3ee6632ade940e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classblmc__robots_1_1BlmcJointModule.html" title="The BlmcJointModule class is containing the joint information. ">BlmcJointModule</a> object.  <a href="#a09a0b8815e6c447e3ee6632ade940e0b">More...</a><br /></td></tr>
<tr class="separator:a09a0b8815e6c447e3ee6632ade940e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb28005a7160ead68603aed4262508f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#adeb28005a7160ead68603aed4262508f">set_torque</a> (const double &amp;desired_torque)</td></tr>
<tr class="memdesc:adeb28005a7160ead68603aed4262508f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the joint torque to be sent.  <a href="#adeb28005a7160ead68603aed4262508f">More...</a><br /></td></tr>
<tr class="separator:adeb28005a7160ead68603aed4262508f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae59680a947539306e391a12ad2d071bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#ae59680a947539306e391a12ad2d071bb">set_zero_angle</a> (const double &amp;zero_angle)</td></tr>
<tr class="memdesc:ae59680a947539306e391a12ad2d071bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the zero_angle.  <a href="#ae59680a947539306e391a12ad2d071bb">More...</a><br /></td></tr>
<tr class="separator:ae59680a947539306e391a12ad2d071bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a137da65771a8628db4692e3bfc924f07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a137da65771a8628db4692e3bfc924f07">set_joint_polarity</a> (const bool &amp;reverse_polarity)</td></tr>
<tr class="memdesc:a137da65771a8628db4692e3bfc924f07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define if the motor should turn clock-wize or counter clock-wize.  <a href="#a137da65771a8628db4692e3bfc924f07">More...</a><br /></td></tr>
<tr class="separator:a137da65771a8628db4692e3bfc924f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0484dd9efc47843706fc71d4351bdbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#af0484dd9efc47843706fc71d4351bdbd">send_torque</a> ()</td></tr>
<tr class="memdesc:af0484dd9efc47843706fc71d4351bdbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">send the joint torque to the motor.  <a href="#af0484dd9efc47843706fc71d4351bdbd">More...</a><br /></td></tr>
<tr class="separator:af0484dd9efc47843706fc71d4351bdbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53be7ff5c2b54c15813a68116e85747e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a53be7ff5c2b54c15813a68116e85747e">get_max_torque</a> () const</td></tr>
<tr class="memdesc:a53be7ff5c2b54c15813a68116e85747e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the maximum admissible joint torque that can be applied.  <a href="#a53be7ff5c2b54c15813a68116e85747e">More...</a><br /></td></tr>
<tr class="separator:a53be7ff5c2b54c15813a68116e85747e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3f19ffc942e9b49dce892b207d3d476"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#af3f19ffc942e9b49dce892b207d3d476">get_sent_torque</a> () const</td></tr>
<tr class="memdesc:af3f19ffc942e9b49dce892b207d3d476"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the sent joint torque.  <a href="#af3f19ffc942e9b49dce892b207d3d476">More...</a><br /></td></tr>
<tr class="separator:af3f19ffc942e9b49dce892b207d3d476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb57fdffcc0222b192658239ef45ab63"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#abb57fdffcc0222b192658239ef45ab63">get_measured_torque</a> () const</td></tr>
<tr class="memdesc:abb57fdffcc0222b192658239ef45ab63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured joint torque.  <a href="#abb57fdffcc0222b192658239ef45ab63">More...</a><br /></td></tr>
<tr class="separator:abb57fdffcc0222b192658239ef45ab63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6419cfb80eb5986dffd982df18a817"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a8c6419cfb80eb5986dffd982df18a817">get_measured_angle</a> () const</td></tr>
<tr class="memdesc:a8c6419cfb80eb5986dffd982df18a817"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured angle of the joint.  <a href="#a8c6419cfb80eb5986dffd982df18a817">More...</a><br /></td></tr>
<tr class="separator:a8c6419cfb80eb5986dffd982df18a817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db4f8c98e9a3e931b19a98dc1339e27"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a6db4f8c98e9a3e931b19a98dc1339e27">get_measured_velocity</a> () const</td></tr>
<tr class="memdesc:a6db4f8c98e9a3e931b19a98dc1339e27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured velocity of the joint.  <a href="#a6db4f8c98e9a3e931b19a98dc1339e27">More...</a><br /></td></tr>
<tr class="separator:a6db4f8c98e9a3e931b19a98dc1339e27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b6a71bb9c300d2398924403a6e7e3c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a47b6a71bb9c300d2398924403a6e7e3c">get_measured_index_angle</a> () const</td></tr>
<tr class="memdesc:a47b6a71bb9c300d2398924403a6e7e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured index angle.  <a href="#a47b6a71bb9c300d2398924403a6e7e3c">More...</a><br /></td></tr>
<tr class="separator:a47b6a71bb9c300d2398924403a6e7e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fab5bc289e01a34374ea8031f5383e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#ad6fab5bc289e01a34374ea8031f5383e">get_zero_angle</a> () const</td></tr>
<tr class="memdesc:ad6fab5bc289e01a34374ea8031f5383e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the zero_angle_.  <a href="#ad6fab5bc289e01a34374ea8031f5383e">More...</a><br /></td></tr>
<tr class="separator:ad6fab5bc289e01a34374ea8031f5383e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464ab2a846630eba6582d09895df2852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a464ab2a846630eba6582d09895df2852">set_position_control_gains</a> (double kp, double kd)</td></tr>
<tr class="memdesc:a464ab2a846630eba6582d09895df2852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set control gains for PD position controller.  <a href="#a464ab2a846630eba6582d09895df2852">More...</a><br /></td></tr>
<tr class="separator:a464ab2a846630eba6582d09895df2852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3100c088a17264562c67429334e3dbf2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a3100c088a17264562c67429334e3dbf2">execute_position_controller</a> (double target_position_rad) const</td></tr>
<tr class="memdesc:a3100c088a17264562c67429334e3dbf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute one iteration of the position controller.  <a href="#a3100c088a17264562c67429334e3dbf2">More...</a><br /></td></tr>
<tr class="separator:a3100c088a17264562c67429334e3dbf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a1da041dae31e9a16f955722c36d6c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a17a1da041dae31e9a16f955722c36d6c">calibrate</a> (double &amp;angle_zero_to_index, double &amp;index_angle, bool mechanical_calibration=false)</td></tr>
<tr class="memdesc:a17a1da041dae31e9a16f955722c36d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method calibrate the joint position knowing the angle between the closest (in positive torque) motor index and the theoretical zero pose.  <a href="#a17a1da041dae31e9a16f955722c36d6c">More...</a><br /></td></tr>
<tr class="separator:a17a1da041dae31e9a16f955722c36d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa534604b5ead6a3eee5c47a9454f6834"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#aa534604b5ead6a3eee5c47a9454f6834">init_homing</a> (int joint_id, double search_distance_limit_rad, double home_offset_rad, double profile_step_size_rad=0.001)</td></tr>
<tr class="memdesc:aa534604b5ead6a3eee5c47a9454f6834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the homing procedure.  <a href="#aa534604b5ead6a3eee5c47a9454f6834">More...</a><br /></td></tr>
<tr class="separator:aa534604b5ead6a3eee5c47a9454f6834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2712542f3c340bc0ecf76bd343b6b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="blmc__joint__module_8hpp.html#aa1075809042ff261e4b0a20d161448b6">HomingReturnCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#abb2712542f3c340bc0ecf76bd343b6b3">update_homing</a> ()</td></tr>
<tr class="memdesc:abb2712542f3c340bc0ecf76bd343b6b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform one step of homing on encoder index.  <a href="#abb2712542f3c340bc0ecf76bd343b6b3">More...</a><br /></td></tr>
<tr class="separator:abb2712542f3c340bc0ecf76bd343b6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd53d7e340b4067f3505633e5a8a06d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a9fd53d7e340b4067f3505633e5a8a06d">get_distance_travelled_during_homing</a> () const</td></tr>
<tr class="memdesc:a9fd53d7e340b4067f3505633e5a8a06d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get distance between start and end position of homing.  <a href="#a9fd53d7e340b4067f3505633e5a8a06d">More...</a><br /></td></tr>
<tr class="separator:a9fd53d7e340b4067f3505633e5a8a06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2b6886df9dc909854ff74c2ec21cbb34"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a2b6886df9dc909854ff74c2ec21cbb34">joint_torque_to_motor_current</a> (double torque) const</td></tr>
<tr class="memdesc:a2b6886df9dc909854ff74c2ec21cbb34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from joint torque to motor current.  <a href="#a2b6886df9dc909854ff74c2ec21cbb34">More...</a><br /></td></tr>
<tr class="separator:a2b6886df9dc909854ff74c2ec21cbb34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa300e4c820a6cd356ac77ba50829c50f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#aa300e4c820a6cd356ac77ba50829c50f">motor_current_to_joint_torque</a> (double current) const</td></tr>
<tr class="memdesc:aa300e4c820a6cd356ac77ba50829c50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from motor current to joint torque.  <a href="#aa300e4c820a6cd356ac77ba50829c50f">More...</a><br /></td></tr>
<tr class="separator:aa300e4c820a6cd356ac77ba50829c50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219d4e433d03ea8a2bae115d5563d844"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a219d4e433d03ea8a2bae115d5563d844">get_motor_measurement</a> (const <a class="el" href="common__header_8hpp.html#a1975c6bb47bc85dfc8edfe349c30dae1">mi</a> &amp;measurement_id) const</td></tr>
<tr class="memdesc:a219d4e433d03ea8a2bae115d5563d844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get motor measurements and check if there are data or not.  <a href="#a219d4e433d03ea8a2bae115d5563d844">More...</a><br /></td></tr>
<tr class="separator:a219d4e433d03ea8a2bae115d5563d844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf5e083076bdc53f24f14f0c22b9061b"><td class="memItemLeft" align="right" valign="top">long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#adf5e083076bdc53f24f14f0c22b9061b">get_motor_measurement_index</a> (const <a class="el" href="common__header_8hpp.html#a1975c6bb47bc85dfc8edfe349c30dae1">mi</a> &amp;measurement_id) const</td></tr>
<tr class="memdesc:adf5e083076bdc53f24f14f0c22b9061b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last motor measurement index for a specific data.  <a href="#adf5e083076bdc53f24f14f0c22b9061b">More...</a><br /></td></tr>
<tr class="separator:adf5e083076bdc53f24f14f0c22b9061b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0ff5ce1cb26ed04212914dc152ec0486"><td class="memItemLeft" align="right" valign="top"><a id="a0ff5ce1cb26ed04212914dc152ec0486"></a>
std::shared_ptr&lt; blmc_drivers::MotorInterface &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a0ff5ce1cb26ed04212914dc152ec0486">motor_</a></td></tr>
<tr class="memdesc:a0ff5ce1cb26ed04212914dc152ec0486"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the pointer to the motor interface. <br /></td></tr>
<tr class="separator:a0ff5ce1cb26ed04212914dc152ec0486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2e6f6cc7f0f7aed02efdca60394b40"><td class="memItemLeft" align="right" valign="top"><a id="a4e2e6f6cc7f0f7aed02efdca60394b40"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a4e2e6f6cc7f0f7aed02efdca60394b40">motor_constant_</a></td></tr>
<tr class="memdesc:a4e2e6f6cc7f0f7aed02efdca60394b40"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the torque constant of the motor: <img class="formulaInl" alt="$ \tau_{motor} = k * i_{motor} $" src="form_1.png"/>. <br /></td></tr>
<tr class="separator:a4e2e6f6cc7f0f7aed02efdca60394b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af013668d69e7cea2dcc21da8c1c9e4e6"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#af013668d69e7cea2dcc21da8c1c9e4e6">gear_ratio_</a></td></tr>
<tr class="memdesc:af013668d69e7cea2dcc21da8c1c9e4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This correspond to the reduction ( <img class="formulaInl" alt="$ \beta $" src="form_2.png"/>) between the motor rotation and the joint.  <a href="#af013668d69e7cea2dcc21da8c1c9e4e6">More...</a><br /></td></tr>
<tr class="separator:af013668d69e7cea2dcc21da8c1c9e4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf774193a8ae31486e937eb432dc702"><td class="memItemLeft" align="right" valign="top"><a id="abdf774193a8ae31486e937eb432dc702"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#abdf774193a8ae31486e937eb432dc702">zero_angle_</a></td></tr>
<tr class="memdesc:abdf774193a8ae31486e937eb432dc702"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the distance between the closest positive index and the zero configuration. <br /></td></tr>
<tr class="separator:abdf774193a8ae31486e937eb432dc702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec97901099ebcc3466851624c656f08"><td class="memItemLeft" align="right" valign="top"><a id="a6ec97901099ebcc3466851624c656f08"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a6ec97901099ebcc3466851624c656f08">polarity_</a></td></tr>
<tr class="memdesc:a6ec97901099ebcc3466851624c656f08"><td class="mdescLeft">&#160;</td><td class="mdescRight">This change the motor rotation direction. <br /></td></tr>
<tr class="separator:a6ec97901099ebcc3466851624c656f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10e1b734a9d4735301962fd9f9c413f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#af10e1b734a9d4735301962fd9f9c413f">max_current_</a></td></tr>
<tr class="memdesc:af10e1b734a9d4735301962fd9f9c413f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the maximum current we can apply during one experiment.  <a href="#af10e1b734a9d4735301962fd9f9c413f">More...</a><br /></td></tr>
<tr class="separator:af10e1b734a9d4735301962fd9f9c413f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa5a06b057850fc626649fd13e3f376c"><td class="memItemLeft" align="right" valign="top"><a id="afa5a06b057850fc626649fd13e3f376c"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#afa5a06b057850fc626649fd13e3f376c">position_control_gain_p_</a></td></tr>
<tr class="memdesc:afa5a06b057850fc626649fd13e3f376c"><td class="mdescLeft">&#160;</td><td class="mdescRight">P gain of the position PD controller. <br /></td></tr>
<tr class="separator:afa5a06b057850fc626649fd13e3f376c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1141b35d0c53d1f4cca107919c1c861e"><td class="memItemLeft" align="right" valign="top"><a id="a1141b35d0c53d1f4cca107919c1c861e"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html#a1141b35d0c53d1f4cca107919c1c861e">position_control_gain_d_</a></td></tr>
<tr class="memdesc:a1141b35d0c53d1f4cca107919c1c861e"><td class="mdescLeft">&#160;</td><td class="mdescRight">D gain of the position PD controller. <br /></td></tr>
<tr class="separator:a1141b35d0c53d1f4cca107919c1c861e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a861d47a808b14e43af7f58ca56284"><td class="memItemLeft" align="right" valign="top"><a id="ab7a861d47a808b14e43af7f58ca56284"></a>
struct <a class="el" href="structblmc__robots_1_1HomingState.html">HomingState</a>&#160;</td><td class="memItemRight" valign="bottom"><b>homing_state_</b></td></tr>
<tr class="separator:ab7a861d47a808b14e43af7f58ca56284"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classblmc__robots_1_1BlmcJointModule.html" title="The BlmcJointModule class is containing the joint information. ">BlmcJointModule</a> class is containing the joint information. </p>
<p>It is here to help converting the data from the motor side to the joint side. It also allows the calibration of the joint position during initialization. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a09a0b8815e6c447e3ee6632ade940e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a0b8815e6c447e3ee6632ade940e0b">&#9670;&nbsp;</a></span>BlmcJointModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">blmc_robots::BlmcJointModule::BlmcJointModule </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; blmc_drivers::MotorInterface &gt;&#160;</td>
          <td class="paramname"><em>motor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>motor_constant</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>gear_ratio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>zero_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>reverse_polarity</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>max_current</em> = <code>2.1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classblmc__robots_1_1BlmcJointModule.html" title="The BlmcJointModule class is containing the joint information. ">BlmcJointModule</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor</td><td>is the C++ object allowing us to send commands and receive sensor data. </td></tr>
    <tr><td class="paramname">motor_constant</td><td>( <img class="formulaInl" alt="$ k $" src="form_0.png"/>) is the torque constant of the motor <img class="formulaInl" alt="$ \tau_{motor} = k * i_{motor} $" src="form_1.png"/> </td></tr>
    <tr><td class="paramname">gear_ratio</td><td>is the gear ratio between the motor and the joint. </td></tr>
    <tr><td class="paramname">zero_angle</td><td>is the angle between the closest positive motor index and the zero configuration. </td></tr>
    <tr><td class="paramname">reverse_polarity</td><td></td></tr>
    <tr><td class="paramname">max_current</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a17a1da041dae31e9a16f955722c36d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17a1da041dae31e9a16f955722c36d6c">&#9670;&nbsp;</a></span>calibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool blmc_robots::BlmcJointModule::calibrate </td>
          <td>(</td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>angle_zero_to_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>index_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mechanical_calibration</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method calibrate the joint position knowing the angle between the closest (in positive torque) motor index and the theoretical zero pose. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>!!!!!!! </dd></dl>
<p>Warning, this method should be called in a real time thread!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3100c088a17264562c67429334e3dbf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3100c088a17264562c67429334e3dbf2">&#9670;&nbsp;</a></span>execute_position_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::execute_position_controller </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>target_position_rad</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute one iteration of the position controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_position_rad</td><td>Target position (rad).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Torque command (Nm). </dd></dl>

</div>
</div>
<a id="a9fd53d7e340b4067f3505633e5a8a06d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd53d7e340b4067f3505633e5a8a06d">&#9670;&nbsp;</a></span>get_distance_travelled_during_homing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_distance_travelled_during_homing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get distance between start and end position of homing. </p>
<p>Compute the distance that the joint moved between initialization of homing and reaching the home position.</p>
<p>This can be used to determine the home offset by first moving the joint to the desired zero position, then executing the homing and finally calling this function which will provide the desired home offset.</p>
<dl class="section return"><dt>Returns</dt><dd>Distance between start and end position of homing. </dd></dl>

</div>
</div>
<a id="a53be7ff5c2b54c15813a68116e85747e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53be7ff5c2b54c15813a68116e85747e">&#9670;&nbsp;</a></span>get_max_torque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_max_torque </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the maximum admissible joint torque that can be applied. </p>
<dl class="section return"><dt>Returns</dt><dd>double </dd></dl>

</div>
</div>
<a id="a8c6419cfb80eb5986dffd982df18a817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c6419cfb80eb5986dffd982df18a817">&#9670;&nbsp;</a></span>get_measured_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_measured_angle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured angle of the joint. </p>
<dl class="section return"><dt>Returns</dt><dd>double (rad). </dd></dl>

</div>
</div>
<a id="a47b6a71bb9c300d2398924403a6e7e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b6a71bb9c300d2398924403a6e7e3c">&#9670;&nbsp;</a></span>get_measured_index_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_measured_index_angle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured index angle. </p>
<p>There is one index per motor rotation so there are gear_ratio indexes per joint rotation.</p>
<dl class="section return"><dt>Returns</dt><dd>double (rad). </dd></dl>

</div>
</div>
<a id="abb57fdffcc0222b192658239ef45ab63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb57fdffcc0222b192658239ef45ab63">&#9670;&nbsp;</a></span>get_measured_torque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_measured_torque </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured joint torque. </p>
<dl class="section return"><dt>Returns</dt><dd>double (Nm). </dd></dl>

</div>
</div>
<a id="a6db4f8c98e9a3e931b19a98dc1339e27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db4f8c98e9a3e931b19a98dc1339e27">&#9670;&nbsp;</a></span>get_measured_velocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_measured_velocity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured velocity of the joint. </p>
<p>This data is computed on board of the control card.</p>
<dl class="section return"><dt>Returns</dt><dd>double (rad/s). </dd></dl>

</div>
</div>
<a id="a219d4e433d03ea8a2bae115d5563d844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a219d4e433d03ea8a2bae115d5563d844">&#9670;&nbsp;</a></span>get_motor_measurement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_motor_measurement </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="common__header_8hpp.html#a1975c6bb47bc85dfc8edfe349c30dae1">mi</a> &amp;&#160;</td>
          <td class="paramname"><em>measurement_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get motor measurements and check if there are data or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measurement_id</td><td>is the id of the measurement you want to get. check: blmc_drivers::MotorInterface::MeasurementIndex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double the measurement. </dd></dl>

</div>
</div>
<a id="adf5e083076bdc53f24f14f0c22b9061b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf5e083076bdc53f24f14f0c22b9061b">&#9670;&nbsp;</a></span>get_motor_measurement_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long int blmc_robots::BlmcJointModule::get_motor_measurement_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="common__header_8hpp.html#a1975c6bb47bc85dfc8edfe349c30dae1">mi</a> &amp;&#160;</td>
          <td class="paramname"><em>measurement_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the last motor measurement index for a specific data. </p>
<p>If there was no data yet, return NaN</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measurement_id</td><td>is the id of the measurement you want to get. check: blmc_drivers::MotorInterface::MeasurementIndex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double the measurement. </dd></dl>

</div>
</div>
<a id="af3f19ffc942e9b49dce892b207d3d476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3f19ffc942e9b49dce892b207d3d476">&#9670;&nbsp;</a></span>get_sent_torque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_sent_torque </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the sent joint torque. </p>
<dl class="section return"><dt>Returns</dt><dd>double (Nm). </dd></dl>

</div>
</div>
<a id="ad6fab5bc289e01a34374ea8031f5383e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6fab5bc289e01a34374ea8031f5383e">&#9670;&nbsp;</a></span>get_zero_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::get_zero_angle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the zero_angle_. </p>
<p>These are the angle between the starting pose and the theoretical zero pose.</p>
<dl class="section return"><dt>Returns</dt><dd>double (rad). </dd></dl>

</div>
</div>
<a id="aa534604b5ead6a3eee5c47a9454f6834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa534604b5ead6a3eee5c47a9454f6834">&#9670;&nbsp;</a></span>init_homing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::init_homing </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>joint_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>search_distance_limit_rad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>home_offset_rad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>profile_step_size_rad</em> = <code>0.001</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the homing procedure. </p>
<p>This has to be called before <a class="el" href="classblmc__robots_1_1BlmcJointModule.html#abb2712542f3c340bc0ecf76bd343b6b3" title="Perform one step of homing on encoder index. ">update_homing()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">joint_id</td><td>ID of the joint. This is only used for debug prints. </td></tr>
    <tr><td class="paramname">search_distance_limit_rad</td><td>Maximum distance the motor moves while searching for the encoder index. Unit: radian. </td></tr>
    <tr><td class="paramname">home_offset_rad</td><td>Offset from home position to zero position. Unit: radian. </td></tr>
    <tr><td class="paramname">profile_step_size_rad</td><td>Distance by which the target position of the position profile is changed in each step. Set to a negative value to search for the next encoder index in negative direction. Unit: radian. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b6886df9dc909854ff74c2ec21cbb34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b6886df9dc909854ff74c2ec21cbb34">&#9670;&nbsp;</a></span>joint_torque_to_motor_current()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::joint_torque_to_motor_current </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>torque</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert from joint torque to motor current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">torque</td><td>is the input joint </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double the equivalent motor current. </dd></dl>

</div>
</div>
<a id="aa300e4c820a6cd356ac77ba50829c50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa300e4c820a6cd356ac77ba50829c50f">&#9670;&nbsp;</a></span>motor_current_to_joint_torque()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::motor_current_to_joint_torque </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert from motor current to joint torque. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td>is the motor current. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double is the equivalent joint torque. </dd></dl>

</div>
</div>
<a id="af0484dd9efc47843706fc71d4351bdbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0484dd9efc47843706fc71d4351bdbd">&#9670;&nbsp;</a></span>send_torque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::send_torque </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send the joint torque to the motor. </p>
<p>The conversion between joint torque and motor current is done automatically. </p>

</div>
</div>
<a id="a137da65771a8628db4692e3bfc924f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a137da65771a8628db4692e3bfc924f07">&#9670;&nbsp;</a></span>set_joint_polarity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::set_joint_polarity </td>
          <td>(</td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>reverse_polarity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define if the motor should turn clock-wize or counter clock-wize. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reverse_polarity</td><td>true:reverse rotation axis, false:do nothing. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a464ab2a846630eba6582d09895df2852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464ab2a846630eba6582d09895df2852">&#9670;&nbsp;</a></span>set_position_control_gains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::set_position_control_gains </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set control gains for PD position controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kp</td><td>P gain ( (Nm) / rad ). </td></tr>
    <tr><td class="paramname">kd</td><td>D gain ( (Nm) / (rad/s) ). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adeb28005a7160ead68603aed4262508f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeb28005a7160ead68603aed4262508f">&#9670;&nbsp;</a></span>set_torque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::set_torque </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>desired_torque</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the joint torque to be sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desired_torque</td><td>(Nm) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae59680a947539306e391a12ad2d071bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae59680a947539306e391a12ad2d071bb">&#9670;&nbsp;</a></span>set_zero_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blmc_robots::BlmcJointModule::set_zero_angle </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>zero_angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the zero_angle. </p>
<p>The zero_angle is the angle between the closest positive motor index and the zero configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zero_angle</td><td>(rad) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb2712542f3c340bc0ecf76bd343b6b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2712542f3c340bc0ecf76bd343b6b3">&#9670;&nbsp;</a></span>update_homing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="blmc__joint__module_8hpp.html#aa1075809042ff261e4b0a20d161448b6">HomingReturnCode</a> blmc_robots::BlmcJointModule::update_homing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform one step of homing on encoder index. </p>
<p>Searches for the next encoder index in positive direction and, when found, sets it as home position.</p>
<p>Only performs one step, so this method needs to be called in a loop. This method only set the control, one <em>MUST</em> send the control for the motor after calling this method.</p>
<p>The motor is moved with a position profile until either the encoder index is reached or the search distance limit is exceeded. The position is controlled with a simple PD controller.</p>
<p>If the encoder index is found, its position is used as home position. The zero position is offset from the home position by adding the "home
offset" to it (i.e. zero = home pos. + home offset). If the search distance limit is reached before the encoder index occurs, the homing fails.</p>
<dl class="section return"><dt>Returns</dt><dd>Status of the homing procedure. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af013668d69e7cea2dcc21da8c1c9e4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af013668d69e7cea2dcc21da8c1c9e4e6">&#9670;&nbsp;</a></span>gear_ratio_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::gear_ratio_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This correspond to the reduction ( <img class="formulaInl" alt="$ \beta $" src="form_2.png"/>) between the motor rotation and the joint. </p>
<p><img class="formulaInl" alt="$ \theta_{joint} = \theta_{motor} / \beta $" src="form_3.png"/> </p>

</div>
</div>
<a id="af10e1b734a9d4735301962fd9f9c413f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af10e1b734a9d4735301962fd9f9c413f">&#9670;&nbsp;</a></span>max_current_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double blmc_robots::BlmcJointModule::max_current_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the maximum current we can apply during one experiment. </p>
<p>The program shut down if this value is achieved. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/blmc_robots/<a class="el" href="blmc__joint__module_8hpp_source.html">blmc_joint_module.hpp</a></li>
<li>src/<a class="el" href="blmc__joint__module_8cpp.html">blmc_joint_module.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>blmc_robots</b></li><li class="navelem"><a class="el" href="classblmc__robots_1_1BlmcJointModule.html">BlmcJointModule</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
